# ğŸš— Sistema de Web Scraping de VeÃ­culos - Desafio C2S

Sistema de web scraping para coleta de dados de anÃºncios de veÃ­culos da Webmotors, desenvolvido com arquitetura de microsserviÃ§os em Ruby on Rails.

---

## ğŸ“ Diagrama de Arquitetura

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    FRONTEND (Browser)                                    â”‚
â”‚                              Vue.js + Vuetify + Inertia.js                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                            â”‚
                                            â”‚ HTTP/HTTPS
                                            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                             WEBSCRAPING-MANAGER (:3000)                                  â”‚
â”‚                                   (Sistema Principal)                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ Controllers â”‚  â”‚   Models    â”‚  â”‚   Clients   â”‚  â”‚         Inertia SSR            â”‚ â”‚
â”‚  â”‚ - Tasks     â”‚  â”‚ - Task      â”‚  â”‚ - Auth      â”‚  â”‚   (Server Side Rendering)      â”‚ â”‚
â”‚  â”‚ - Sessions  â”‚  â”‚ - User      â”‚  â”‚ - Scraping  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”‚ - Home      â”‚  â”‚   (virtual) â”‚  â”‚ - Notif.    â”‚                                      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
â”‚                                                                                          â”‚
â”‚  Responsabilidades:                                                                      â”‚
â”‚  â€¢ Interface do usuÃ¡rio (CRUD de tarefas)                                               â”‚
â”‚  â€¢ OrquestraÃ§Ã£o dos microsserviÃ§os                                                       â”‚
â”‚  â€¢ Armazenamento das tarefas de scraping                                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                              â”‚                              â”‚
           â”‚ HTTP                         â”‚ HTTP                         â”‚ HTTP
           â”‚ (JWT Auth)                   â”‚ (Async Job)                  â”‚ (Notify)
           â–¼                              â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AUTH-SERVICE (:3001)â”‚    â”‚ SCRAPING-PROCESSOR(:3003)â”‚    â”‚NOTIFICATION-SERVICE(:3002â”‚
â”‚                      â”‚    â”‚                          â”‚    â”‚                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   JWT Service  â”‚  â”‚    â”‚  â”‚   Sidekiq Jobs   â”‚   â”‚    â”‚  â”‚  Action Cable    â”‚   â”‚
â”‚  â”‚   - encode()   â”‚  â”‚    â”‚  â”‚   - ScrapingJob  â”‚   â”‚    â”‚  â”‚  (WebSockets)    â”‚   â”‚
â”‚  â”‚   - decode()   â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚            â”‚            â”‚    â”‚            â”‚            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚            â–¼            â”‚    â”‚            â–¼            â”‚
â”‚  â”‚   User Model   â”‚  â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚   - email      â”‚  â”‚    â”‚  â”‚ ScrapingService  â”‚   â”‚    â”‚  â”‚  Notifications   â”‚   â”‚
â”‚  â”‚   - password   â”‚  â”‚    â”‚  â”‚ (Ferrum+Nokogiri)â”‚   â”‚    â”‚  â”‚     Channel      â”‚   â”‚
â”‚  â”‚   - name       â”‚  â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚                          â”‚    â”‚                          â”‚
â”‚                      â”‚    â”‚  Responsabilidades:      â”‚    â”‚  Responsabilidades:      â”‚
â”‚  Responsabilidades:  â”‚    â”‚  â€¢ Web scraping real     â”‚    â”‚  â€¢ NotificaÃ§Ãµes em       â”‚
â”‚  â€¢ Registro/Login    â”‚    â”‚  â€¢ Processamento async   â”‚    â”‚    tempo real            â”‚
â”‚  â€¢ ValidaÃ§Ã£o JWT     â”‚    â”‚  â€¢ Coleta marca/modelo/  â”‚    â”‚  â€¢ WebSocket broadcast   â”‚
â”‚  â€¢ GestÃ£o de users   â”‚    â”‚    preÃ§o                 â”‚    â”‚  â€¢ Eventos da aplicaÃ§Ã£o  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚                              â”‚                              â”‚
           â”‚                              â”‚                              â”‚
           â–¼                              â–¼                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                    INFRAESTRUTURA                                        â”‚
â”‚                                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚      PostgreSQL (:5432)     â”‚              â”‚        Redis (:6379)        â”‚           â”‚
â”‚  â”‚                             â”‚              â”‚                             â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â”‚  â€¢ Sidekiq Queue            â”‚           â”‚
â”‚  â”‚  â”‚ auth_db â”‚ â”‚webscrapingâ”‚  â”‚              â”‚  â€¢ Pub/Sub (task updates)   â”‚           â”‚
â”‚  â”‚  â”‚         â”‚ â”‚   _db     â”‚  â”‚              â”‚  â€¢ Action Cable adapter     â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚              â”‚                             â”‚           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚  â”‚  â”‚notificati-â”‚ â”‚scraping â”‚  â”‚                                                        â”‚
â”‚  â”‚  â”‚  on_db    â”‚ â”‚   _db   â”‚  â”‚                                                        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                                                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”„ Fluxo de Dados

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              FLUXO: CRIAR TAREFA DE SCRAPING                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

 â”Œâ”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 â”‚ User â”‚         â”‚  Webscraping  â”‚       â”‚   Scraping   â”‚       â”‚   Notification   â”‚
 â”‚      â”‚         â”‚    Manager    â”‚       â”‚   Processor  â”‚       â”‚     Service      â”‚
 â””â”€â”€â”¬â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚  1. Criar Task      â”‚                      â”‚                        â”‚
    â”‚  (tÃ­tulo + URL)     â”‚                      â”‚                        â”‚
    â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                      â”‚                        â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚  2. Salva Task       â”‚                        â”‚
    â”‚                     â”‚  (status: pending)   â”‚                        â”‚
    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚                        â”‚
    â”‚                     â”‚          â”‚           â”‚                        â”‚
    â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚                        â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚  3. POST /scrap_task â”‚                        â”‚
    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚                        â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚                      â”‚  4. Enfileira Job      â”‚
    â”‚                     â”‚                      â”‚  (Sidekiq)             â”‚
    â”‚                     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
    â”‚                     â”‚                      â”‚          â”‚             â”‚
    â”‚                     â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚  5. Notifica         â”‚                        â”‚
    â”‚                     â”‚  (task_created)      â”‚                        â”‚
    â”‚                     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚  6. Redirect        â”‚                      â”‚                        â”‚
    â”‚  (lista de tasks)   â”‚                      â”‚                        â”‚
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                      â”‚                        â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚                      â”‚  7. Sidekiq processa   â”‚
    â”‚                     â”‚                      â”‚  ScrapingJob           â”‚
    â”‚                     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
    â”‚                     â”‚                      â”‚  Ferrum  â”‚             â”‚
    â”‚                     â”‚                      â”‚  Chrome  â”‚             â”‚
    â”‚                     â”‚                      â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚  8. Redis Pub/Sub    â”‚                        â”‚
    â”‚                     â”‚  (task_update_status)â”‚                        â”‚
    â”‚                     â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                        â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚                      â”‚  9. Notifica           â”‚
    â”‚                     â”‚                      â”‚  (task_completed)      â”‚
    â”‚                     â”‚                      â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€>â”‚
    â”‚                     â”‚                      â”‚                        â”‚
    â”‚                     â”‚                      â”‚                        â”‚  10. WebSocket
    â”‚  11. Real-time      â”‚                      â”‚                        â”‚  Broadcast
    â”‚  Update             â”‚                      â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚          â”‚
    â”‚                     â”‚                      â”‚                        â”‚<â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ› ï¸ Stack TecnolÃ³gica

| Camada | Tecnologia |
|--------|------------|
| **Backend** | Ruby 3.3+ / Rails 8.1.2 |
| **Frontend** | Vue.js 3 + Vuetify 3 + Inertia.js |
| **Bundler** | Vite |
| **Banco de Dados** | PostgreSQL 15+ |
| **Cache/Queue** | Redis 7+ |
| **Jobs** | Sidekiq |
| **Web Scraping** | Ferrum (Headless Chrome) + Nokogiri |
| **AutenticaÃ§Ã£o** | JWT (JSON Web Tokens) |
| **WebSockets** | Action Cable |
| **Containers** | Docker + Docker Compose |

---

## ğŸ“ Estrutura dos ServiÃ§os

```
desafio-c2s/
â”œâ”€â”€ docker-compose.yml          # OrquestraÃ§Ã£o de todos os serviÃ§os
â”‚
â”œâ”€â”€ webscraping-manager/        # Sistema Principal (Frontend + API)
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ clients/            # Clientes HTTP para outros serviÃ§os
â”‚   â”‚   â”œâ”€â”€ controllers/        # Controllers Rails + Inertia
â”‚   â”‚   â”œâ”€â”€ javascript/         # Vue.js components
â”‚   â”‚   â”‚   â””â”€â”€ pages/          # PÃ¡ginas Inertia
â”‚   â”‚   â”œâ”€â”€ models/             # Task model
â”‚   â”‚   â””â”€â”€ repository/         # Repository pattern
â”‚   â””â”€â”€ config/
â”‚
â”œâ”€â”€ auth-service/               # MicrosserviÃ§o de AutenticaÃ§Ã£o
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ controllers/api/v1/ # Endpoints JWT
â”‚   â”‚   â”œâ”€â”€ models/             # User model
â”‚   â”‚   â””â”€â”€ services/           # JWT Service
â”‚   â””â”€â”€ config/
â”‚
â”œâ”€â”€ scraping-processor/         # MicrosserviÃ§o de Processamento
â”‚   â”œâ”€â”€ app/
â”‚   â”‚   â”œâ”€â”€ controllers/api/v1/ # Endpoints de scraping
â”‚   â”‚   â”œâ”€â”€ jobs/               # Sidekiq Jobs
â”‚   â”‚   â”œâ”€â”€ models/             # ScrapeTask model
â”‚   â”‚   â””â”€â”€ services/           # ScrapingService
â”‚   â””â”€â”€ config/
â”‚
â””â”€â”€ notification-service/       # MicrosserviÃ§o de NotificaÃ§Ãµes
    â”œâ”€â”€ app/
    â”‚   â”œâ”€â”€ channels/           # Action Cable channels
    â”‚   â””â”€â”€ controllers/api/v1/ # Endpoints de notificaÃ§Ã£o
    â””â”€â”€ config/
```

---

## ğŸš€ Como Executar

### PrÃ©-requisitos
- Docker 24+
- Docker Compose 2.20+

### Subir todos os serviÃ§os

```bash
# Clone o repositÃ³rio
git clone <repo-url>
cd desafio-c2s

# Subir todos os serviÃ§os
docker-compose up --build

# Criar os bancos de dados (primeiro uso)
docker-compose exec webscraping-manager rails db:create db:migrate
docker-compose exec auth-service rails db:create db:migrate
docker-compose exec scraping-processor rails db:create db:migrate
docker-compose exec notification-service rails db:create db:migrate
```

### Acessar a aplicaÃ§Ã£o

| ServiÃ§o | URL |
|---------|-----|
| **Frontend (Manager)** | http://localhost:3000 |
| **Auth Service** | http://localhost:3001 |
| **Notification Service** | http://localhost:3002 |
| **Scraping Processor** | http://localhost:3003 |
| **Sidekiq Dashboard** | http://localhost:3003/sidekiq |

---

## ğŸ“¡ Endpoints da API

### Auth Service (`:3001`)

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `POST` | `/api/v1/sign_up` | Registrar novo usuÃ¡rio |
| `POST` | `/api/v1/sign_in` | Login (retorna JWT) |
| `DELETE` | `/api/v1/logout` | Logout |
| `GET` | `/api/v1/users` | Listar usuÃ¡rios |
| `GET` | `/api/v1/users/:id` | Buscar usuÃ¡rio por ID |

### Scraping Processor (`:3003`)

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `POST` | `/api/v1/scrap_task` | Criar tarefa de scraping |
| `GET` | `/api/v1/health` | Health check |

### Notification Service (`:3002`)

| MÃ©todo | Endpoint | DescriÃ§Ã£o |
|--------|----------|-----------|
| `POST` | `/api/v1/notifications` | Enviar notificaÃ§Ã£o |
| `WS` | `/api/cable` | WebSocket (Action Cable) |

---

## ğŸ“£ Tipos de Eventos de NotificaÃ§Ã£o

| Evento | DescriÃ§Ã£o | Quando Ã© disparado |
|--------|-----------|-------------------|
| `task_created` | Tarefa criada | Ao criar nova tarefa no Manager |
| `task_completed` | Scraping concluÃ­do | Ao finalizar coleta com sucesso |
| `task_failed` | Falha no scraping | Ao falhar na coleta |

---

## ğŸ” VariÃ¡veis de Ambiente

```env
# Compartilhadas
JWT_SECRET_KEY=your-secret-key
DATABASE_URL=postgresql://user:pass@host:5432/db
REDIS_URL=redis://redis:6379/0

# Webscraping Manager
AUTH_SERVICE_URL=http://auth-service:3000
SCRAPING_PROCESSOR_URL=http://scraping-processor:3000
NOTIFICATION_SERVICE_URL=http://notification-service:3000

# Scraping Processor
WEBSCRAPING_MANAGER_URL=http://webscraping-manager:3000
```

---

## ğŸ“ LicenÃ§a

Este projeto foi desenvolvido como parte de um desafio tÃ©cnico.
